<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Survivor Radio — Overwatch: Zombies</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Oxanium:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --ow-orange:#f9a51a;
      --ow-orange-2:#ffb547;
      --ow-blue:#00a7e0;
      --ow-dark:#0f1216;
      --ow-dark-2:#161a21;
      --ow-card:#151a22;
      --ow-line:#232a34;
      --ow-text:#e8edf2;
      --ow-dim:#9aa3ad;
      --shadow: 0 8px 30px rgba(0,0,0,.35);
      --radius: 16px;
      --gap: 22px;
      --max: 1100px;
      --nav-h: 74px;
      --player-h: 78px;
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--ow-dark);color:var(--ow-text)}
    body{
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      line-height:1.6;
      padding-top: var(--nav-h);
      padding-bottom: var(--player-h);
    }
    h1,h2,h3{
      font-family: Oxanium, Inter, sans-serif;
      line-height:1.15;
      letter-spacing:.3px;
      margin:0 0 .6em;
    }
    h1{font-size: clamp(32px, 5vw, 54px);}
    h2{font-size: clamp(22px, 3vw, 28px);}
    a{color:var(--ow-blue);text-decoration:none}
    a:hover{text-decoration:underline}
    .muted{color:var(--ow-dim)}

    /* Sticky / glass nav */
    .nav{
      position:fixed; inset:0 0 auto 0; height:var(--nav-h); z-index:9999;
      display:flex; align-items:center; justify-content:center;
      backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(15,18,22,.75), rgba(15,18,22,.45));
      border-bottom:1px solid var(--ow-line);
    }
    .nav__inner{
      width:100%; max-width:var(--max); padding:0 16px;
      display:flex; align-items:center; justify-content:space-between; gap:16px;
    }
    .brand{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.5px;}
    .brand__logo{
      width:34px; height:34px; border-radius:50%;
      background: radial-gradient(90% 90% at 30% 30%, var(--ow-orange), #ff7a00);
      box-shadow: inset 0 0 0 2px #111, 0 4px 12px rgba(0,0,0,.35);
    }
    .brand__name{color:#fff}

    .nav__links{display:flex; gap:18px; align-items:center; flex-wrap:wrap;}
    .chip{
      color:#fff; font-weight:700; padding:10px 14px; border-radius:999px;
      background:transparent; border:1px solid transparent;
      transition:.2s transform ease, .2s background ease, .2s border-color ease;
      text-decoration:none; white-space:nowrap;
      will-change: transform;
    }
    .chip:hover{transform:translateY(-1px)}
    .chip--gold{border-color:#2a2f39; background:linear-gradient(180deg,#1b212a,#151a22)}
    .chip--gold:hover{border-color:#3a414e; background:linear-gradient(180deg,#202735,#161c25)}
    .chip--cta{background:linear-gradient(180deg,var(--ow-orange),var(--ow-orange-2)); color:#111; box-shadow:0 8px 20px rgba(249,165,26,.35)}
    .chip.is-active{outline:2px solid #35404f}

    .nav__toggle{display:none}
    .nav__btn{
      display:none; width:42px;height:42px;border-radius:10px;border:1px solid #2b3240;
      background:linear-gradient(180deg,#1b212a,#151a22); color:#fff; align-items:center; justify-content:center;
      cursor:pointer; transition:.2s transform ease; will-change: transform;
    }
    .nav__btn:hover{transform:translateY(-1px)}
    .nav__icon{width:22px;height:22px;display:block}
    .nav__panel{
      display:none; position:fixed; top:var(--nav-h); left:0; right:0;
      background:linear-gradient(180deg,#12161d,#0e131a); border-bottom:1px solid var(--ow-line);
      box-shadow:var(--shadow); padding:12px 16px 16px;
    }
    .nav__panel .chip{display:block; text-align:center; margin:8px 0; padding:12px 16px; font-size:16px}
    .nav__toggle:checked ~ .nav__panel{display:block}

    /* Breakpoint moved to 1100px */
    @media (max-width: 1100px){
      .nav__links{display:none}
      .nav__btn{display:flex}
      .brand__name{font-size:15px}
    }

    /* Shared layout */
    .wrap{max-width:var(--max); margin:0 auto; padding: clamp(28px,4vw,40px);}
    @media (max-width:600px){ .wrap{padding-left:48px; padding-right:48px;} }
    section{padding: clamp(26px, 5vw, 50px) 0; border-bottom:1px solid var(--ow-line)}

    /* Hero */
    .hero{
      position:relative; isolation:isolate; border-bottom:1px solid var(--ow-line);
      background:
        radial-gradient(60% 60% at 70% 10%, rgba(249,165,26,.08), transparent 60%),
        radial-gradient(40% 40% at 10% 10%, rgba(0,167,224,.08), transparent 60%),
        linear-gradient(180deg, var(--ow-dark-2), var(--ow-dark));
    }
    .hero__bg{
      position:absolute; inset:0; opacity:.12; pointer-events:none;
      background: url('images/hero-noise.webp') center/cover no-repeat;
      mix-blend: screen;
      filter: saturate(1.05);
    }
    .hero__content{
      padding: clamp(28px, 5vw, 72px);
      padding-left: 48px; padding-right: 48px;
      display: grid; gap: 18px;
    }
    .eyebrow{display:inline-flex; align-items:center; gap:8px; font-weight:800; text-transform:uppercase; font-size:12px; color:var(--ow-dim)}
    .eyebrow .dot{width:6px;height:6px;border-radius:50%;background:var(--ow-orange)}

    /* Cards & playlist accordions */
    .grid{display:grid; gap:var(--gap); grid-template-columns:repeat(12,1fr)}
    .card{
      grid-column: span 12;
      background: linear-gradient(180deg,#12161d,#0f141b);
      border:1px solid var(--ow-line); border-radius:var(--radius);
      overflow:hidden; box-shadow:var(--shadow);
    }
    @media(min-width:720px){ .card{grid-column: span 6} }
    .media{position:relative; aspect-ratio: 16/9; overflow:hidden; background:#000}
    .media img{width:100%; height:100%; object-fit:cover; display:block}
    .caption{
      position:absolute; inset:auto 0 0 0;
      padding:10px 12px; text-align:center; color:#fff; font-weight:800;
      background: linear-gradient(180deg, transparent, rgba(0,0,0,.75));
    }
    .card__body{padding:16px}
    .meta{display:flex; gap:10px; flex-wrap:wrap; margin:6px 0 10px}
    .pill{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; font-size:12px; letter-spacing:.2px; border:1px solid #2b3240; color:#c6cdd6; background:#121721}

    .btn{
      display:inline-flex; align-items:center; gap:10px;
      padding:12px 16px; border-radius:12px; font-weight:800; border:1px solid transparent;
      background:#1a2028; color:#fff; text-decoration:none; transition:.2s transform .15s ease, .2s background ease, .2s box-shadow ease;
      will-change: transform; cursor:pointer;
    }
    .btn:hover{transform:translateY(-1px)}
    .btn--primary{background:linear-gradient(180deg,var(--ow-orange),var(--ow-orange-2)); color:#111; box-shadow:0 8px 18px rgba(249,165,26,.28)}
    .btn--ghost{border-color:#2c3340}

    details.playlist{border-top:1px solid var(--ow-line); background:#0f141b}
    details[open].playlist{border-top-color:#313949}
    summary.playlist__summary{
      cursor:pointer; list-style:none; padding:14px 16px; font-weight:800;
      display:flex; align-items:center; gap:10px;
    }
    summary.playlist__summary::-webkit-details-marker{display:none}
    .playlist__tracks{padding:0 16px 14px}
    .track{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding:10px 12px; border:1px solid #2b3240; border-radius:12px; background:#121721;
    }
    .track + .track{margin-top:10px}
    .track__left{display:flex; align-items:center; gap:10px}
    .track__play{
      width:34px; height:34px; border-radius:10px; border:1px solid #2b3240; background:#0f141b;
      display:grid; place-items:center; cursor:pointer; transition:.15s transform ease;
      will-change: transform;
    }
    .track__play:hover{transform:translateY(-1px)}
    .track__title{font-weight:600}
    .track__len{color:var(--ow-dim); font-size:12px}

    /* Sticky bottom player */
    .player{
      position:fixed; left:0; right:0; bottom:0; height:var(--player-h); z-index:99999;
      display:flex; align-items:center; justify-content:center;
      backdrop-filter: blur(8px);
      background:linear-gradient(180deg, rgba(15,18,22,.6), rgba(15,18,22,.9));
      border-top:1px solid var(--ow-line);
    }
    .player__inner{
      width:100%; max-width:var(--max); padding:0 16px; display:flex; align-items:center; gap:14px;
    }
    .player__meta{min-width:0; display:flex; flex-direction:column}
    .player__title{font-weight:700; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
    .player__subtitle{color:var(--ow-dim); font-size:12px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
    .player__controls{display:flex; align-items:center; gap:10px; margin-left:auto}
    .iconbtn{
      width:40px; height:40px; border-radius:12px; border:1px solid #2b3240; background:#121721; color:#e8edf2;
      display:grid; place-items:center; cursor:pointer; transition:.15s transform ease; will-change: transform;
    }
    .iconbtn:hover{transform:translateY(-1px)}
    .scrubber{flex:1; display:flex; align-items:center; gap:10px}
    .scrubber input[type="range"]{width:100%}
    .time{font-variant-numeric: tabular-nums; color:var(--ow-dim); font-size:12px}

    footer{padding:40px 0; color:var(--ow-dim); text-align:center}
  </style>
</head>
<body>

  <!-- NAV -->
  <header class="nav">
    <div class="nav__inner">
      <div class="brand">
        <div class="brand__logo" aria-hidden="true"></div>
        <div class="brand__name">Overwatch: Zombies</div>
      </div>

      <label for="nav-toggle" class="nav__btn" aria-label="Open menu">
        <svg class="nav__icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M3 6h18v2H3V6Zm0 5h18v2H3v-2Zm0 5h18v2H3v-2Z"/>
        </svg>
      </label>
      <input type="checkbox" id="nav-toggle" class="nav__toggle" aria-hidden="true">

      <!-- Desktop links -->
      <nav class="nav__links" aria-label="Primary">
        <a class="chip chip--gold" href="index.html">Home</a>
        <a class="chip chip--gold" href="comics.html">Comics</a>
        <a class="chip chip--gold" href="mapcodes.html">Map Codes</a>
        <a class="chip chip--gold" href="wiki.html">Wiki</a>
        <a class="chip chip--gold" href="credits.html">Credits</a>
        <a class="chip chip--gold is-active" href="radio.html">Survivor Radio</a>
        <a class="chip chip--cta"  href="donations.html">Donations</a>
      </nav>

      <!-- Mobile panel -->
      <nav class="nav__panel" aria-label="Mobile menu">
        <a class="chip chip--gold" href="index.html"     onclick="document.getElementById('nav-toggle').checked=false">Home</a>
        <a class="chip chip--gold" href="comics.html"    onclick="document.getElementById('nav-toggle').checked=false">Comics</a>
        <a class="chip chip--gold" href="mapcodes.html"  onclick="document.getElementById('nav-toggle').checked=false">Map Codes</a>
        <a class="chip chip--gold" href="wiki.html"      onclick="document.getElementById('nav-toggle').checked=false">Wiki</a>
        <a class="chip chip--gold" href="credits.html"   onclick="document.getElementById('nav-toggle').checked=false">Credits</a>
        <a class="chip chip--gold" href="radio.html"     onclick="document.getElementById('nav-toggle').checked=false">Survivor Radio</a>
        <a class="chip chip--cta"  href="donations.html" onclick="document.getElementById('nav-toggle').checked=false">Donations</a>
      </nav>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero">
    <div class="hero__bg"></div>
    <div class="wrap hero__content">
      <div class="eyebrow"><span class="dot"></span> In‑universe soundtrack</div>
      <h1>Survivor Radio</h1>
      <p class="muted">Pick a map, then a track. Enjoy the music while you play!</p>
    </div>
  </section>

  <!-- MAP SELECTOR -->
  <section>
    <div class="wrap">
      <div class="grid" id="maps">
        <!-- Cards are generated from the data below -->
      </div>
    </div>
  </section>

  <!-- STICKY PLAYER -->
  <div class="player" role="region" aria-label="Audio Player">
    <div class="player__inner">
      <div class="iconbtn" id="prevBtn" title="Previous" aria-label="Previous">
        ⏮
      </div>
      <div class="iconbtn" id="playPause" title="Play/Pause" aria-label="Play/Pause">▶</div>
      <div class="iconbtn" id="nextBtn" title="Next" aria-label="Next">⏭</div>

      <div class="scrubber">
        <span class="time" id="cur">0:00</span>
        <input id="seek" type="range" min="0" max="100" value="0" aria-label="Seek">
        <span class="time" id="dur">0:00</span>
      </div>

      <div class="player__meta">
        <div class="player__title" id="title">—</div>
        <div class="player__subtitle" id="subtitle">Select a track</div>
      </div>

      <audio id="audio" preload="metadata" crossorigin="anonymous"></audio>
    </div>
  </div>

  <!-- FOOTER -->
  <footer>
    <div class="wrap">
      <div>© <span id="y"></span> Zombie Survival • A Fan Made Overwatch Workshop Gamemode</div>
      <div style="margin-top:8px">
        <a href="index.html">Home</a> •
        <a href="comics.html">Comics</a> •
        <a href="mapcodes.html">Map Codes</a> •
        <a href="wiki.html">Wiki</a> •
        <a href="credits.html">Credits</a> •
        <a href="radio.html">Survivor Radio</a> •
        <a href="donations.html">Donations</a> •
        <a href="about.html">About Me</a>
      </div>
    </div>
  </footer>

  <script>
    // Close mobile menu on resize up
    window.addEventListener('resize', () => {
      if (window.innerWidth > 1100) {
        const cb = document.getElementById('nav-toggle');
        if (cb) cb.checked = false;
      }
    });
    document.getElementById('y').textContent = new Date().getFullYear();

    // ---- DATA: define maps & tracks here ----
    const RADIO = [
      {
        id: 'kingsrow',
        name: 'Kings Row',
        cover: 'assets/images/map-kingsrow.jpg',
        desc: '',
        tags: [],
        tracks: [
          { title: 'Circuit Breaker', len: '4:42', url: 'assets/audio/kingsrow/circuit-breaker.mp3' }
        ],
      },
      {
        id: 'antarcticp',
        name: 'Antarctic Peninsula',
        cover: 'assets/images/map-antarcticp.jpg',
        desc: '',
        tags: [],
        tracks: [
        ],
      },
      {
        id: 'shambalimonastery',
        name: 'Shambali Monastery',
        cover: 'assets/images/map-shambalimonastery.jpg',
        desc: '',
        tags: [],
        tracks: [
          { title: 'Battle at the Temple',    len: '3:55', url: 'assets/audio/shambalimonastery/battle-temple.mp3' },
          { title: 'Temple Descent',   len: '3:12', url: 'assets/audio/shambalimonastery/temple-descent.mp3' },
        ],
      },
      {
        id: 'thee',
        name: 'thee',
        cover: 'assets/images/map-thee.jpg',
        desc: '',
        tags: [],
        tracks: [
        ],
      },
    ];

    // ---- Render map cards + accordion playlists ----
    const mapsEl = document.getElementById('maps');
    mapsEl.innerHTML = RADIO.map(map => `
      <article class="card">
        <div class="media">
          <img src="${map.cover}" alt="${map.name}">
          <div class="caption">${map.name}</div>
        </div>
        <div class="card__body">
          <h3>${map.name}</h3>
          <div class="meta">
            ${map.tags.map(t=>`<span class="pill">${t}</span>`).join('')}
          </div>
          <p class="muted">${map.desc}</p>
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
            <button class="btn btn--primary" data-open="${map.id}">Open playlist</button>
          </div>
        </div>
        <details class="playlist" id="pl-${map.id}">
          <summary class="playlist__summary">Playlist — ${map.tracks.length} track${map.tracks.length>1?'s':''}</summary>
          <div class="playlist__tracks">
            ${map.tracks.map((t,i)=>`
              <div class="track">
                <div class="track__left">
                  <button class="track__play" data-play="${map.id}" data-index="${i}" title="Play ${t.title}" aria-label="Play ${t.title}">▶</button>
                  <div class="track__title">${t.title}</div>
                </div>
                <div class="track__len">${t.len}</div>
              </div>
            `).join('')}
          </div>
        </details>
      </article>
    `).join('');

    // Toggle playlists
    document.querySelectorAll('[data-open]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const id = btn.getAttribute('data-open');
        const det = document.getElementById('pl-'+id);
        det.open = !det.open;
        det.scrollIntoView({behavior:'smooth', block:'nearest'});
      });
    });

    // ---- Player logic ----
    const audio = document.getElementById('audio');
    const playPause = document.getElementById('playPause');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const curEl = document.getElementById('cur');
    const durEl = document.getElementById('dur');
    const seek = document.getElementById('seek');
    const titleEl = document.getElementById('title');
    const subtitleEl = document.getElementById('subtitle');

    let queue = [];
    let qi = 0;

    function fmt(t){ if(!isFinite(t)) return '0:00'; const m=Math.floor(t/60); const s=Math.floor(t%60).toString().padStart(2,'0'); return `${m}:${s}`; }

    function loadTrack(mapId, index){
      const map = RADIO.find(m=>m.id===mapId);
      if(!map) return;
      queue = map.tracks.map(t=>({...t, mapName: map.name}));
      qi = index ?? 0;
      const tr = queue[qi];
      audio.src = tr.url;
      titleEl.textContent = tr.title;
      subtitleEl.textContent = map.name;
      audio.play().catch(()=>{});
      playPause.textContent = '⏸';
    }

    document.querySelectorAll('[data-play]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const mapId = btn.getAttribute('data-play');
        const index = parseInt(btn.getAttribute('data-index'),10) || 0;
        loadTrack(mapId, index);
      });
    });

    playPause.addEventListener('click', ()=>{
      if(audio.paused){ audio.play(); playPause.textContent='⏸'; }
      else{ audio.pause(); playPause.textContent='▶'; }
    });
    prevBtn.addEventListener('click', ()=>{
      if(!queue.length) return;
      qi = (qi-1+queue.length)%queue.length;
      const tr = queue[qi];
      audio.src = tr.url; titleEl.textContent = tr.title;
      subtitleEl.textContent = tr.mapName; audio.play(); playPause.textContent='⏸';
    });
    nextBtn.addEventListener('click', ()=>{
      if(!queue.length) return;
      qi = (qi+1)%queue.length;
      const tr = queue[qi];
      audio.src = tr.url; titleEl.textContent = tr.title;
      subtitleEl.textContent = tr.mapName; audio.play(); playPause.textContent='⏸';
    });

    audio.addEventListener('timeupdate', ()=>{
      seek.value = (audio.currentTime / (audio.duration||1)) * 100;
      curEl.textContent = fmt(audio.currentTime);
      durEl.textContent = fmt(audio.duration||0);
    });
    seek.addEventListener('input', ()=>{
      if(!isFinite(audio.duration)) return;
      audio.currentTime = (seek.value/100) * audio.duration;
    });
    audio.addEventListener('ended', ()=> nextBtn.click());
  </script>
</body>
</html>
